(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"4/3K":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"es":{"modal":{"title":"Excepcion","subtitle":" "}}}'),delete e.options._Ctor}},JM7P:function(e,t,i){},K43U:function(e,t,i){"use strict";var o=i("JM7P"),l=i.n(o);l.a},QDrA:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("q-table",{staticClass:"no-shadow",attrs:{title:e.table.title,"row-key":e.table.rowKey,loading:e.table.loading,data:e.table.data,columns:e.table.columns,filter:e.table.filter,pagination:e.table.pagination},on:{"update:pagination":function(t){e.$set(e.table,"pagination",t)}},scopedSlots:e._u([{key:"top-left",fn:function(t){return[i("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",flat:"",color:"primary",icon:"refresh",size:"md"},on:{click:function(t){e.fetchItems()}}}),i("q-search",{staticClass:"col-6",attrs:{"hide-underline":"",color:"secondary"},model:{value:e.table.filter,callback:function(t){e.$set(e.table,"filter",t)},expression:"table.filter"}})]}},{key:"top-right",fn:function(t){return[e.isAuthorized(e.resource,"create","any")?i("q-btn",{attrs:{round:"",color:"positive",icon:"add",size:"md"},on:{click:function(t){e.edit()}}}):e._e()]}},{key:"body-cell-edit",fn:function(t){return i("q-td",{attrs:{props:t,"auto-width":""}},[e.isAuthorized(e.resource,["update","delete"],"any")?i("q-btn",{attrs:{size:"md",round:"",dense:"",flat:"",icon:"edit",color:"dark"},on:{click:function(i){e.edit(t.row)}}}):e._e()],1)}}])}),i("q-modal",{ref:"modal",attrs:{"no-esc-dismiss":"","no-backdrop-dismiss":"","content-css":"width: 80vw; height: 80vh;"}},[i("q-modal-layout",[i("q-toolbar",{staticClass:"q-py-none q-pr-none",attrs:{slot:"header"},slot:"header"},[i("q-toolbar-title",[e._v("\n          "+e._s(e.editMode?e.$t("edit"):e.$t("create"))+" "+e._s(e.$t("modal.title"))+"\n          "),i("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[e._v(e._s(e.$t("modal.subtitle")))])]),i("q-btn",{staticClass:"no-shadow",staticStyle:{"border-radius":"0"},attrs:{icon:"close",color:"negative",size:"lg"},on:{click:function(t){e.cancel()}}})],1),i("q-toolbar",{staticClass:"justify-around q-py-sm",attrs:{slot:"footer",align:"around"},slot:"footer"},[e.editMode?[e.isAuthorized(e.resource,"delete","any")?i("q-btn",{attrs:{size:"lg",rounded:"",color:"negative",icon:"delete"},on:{click:function(t){e.deleteItem(e.item)}}},[e._v(e._s(e.$t("buttons.deleteItem")))]):e._e(),e.isAuthorized(e.resource,"update","any")?i("q-btn",{attrs:{size:"lg",rounded:"",color:"positive",icon:"save",disable:e.$v.item.$invalid},on:{click:function(t){e.updateItem(e.item)}}},[e._v(e._s(e.$t("buttons.updateItem")))]):e._e()]:[e.isAuthorized(e.resource,"create","any")?i("q-btn",{attrs:{size:"lg",rounded:"",color:"positive",icon:"create",disable:e.$v.item.$invalid},on:{click:function(t){e.createItem(e.item)}}},[e._v(e._s(e.$t("buttons.createItem")))]):e._e()]],2),i("div",{staticClass:"layout-padding group"},[i("q-field",{attrs:{label:e.$t("field.exception_name.label"),helper:e.$t("field.exception_name.helper"),error:e.$v.item.exception_name.$error,"error-label":e.validationError(e.$v.item.exception_name)}},[i("q-input",{attrs:{placeholder:e.$t("field.exception_name.placeholder")},model:{value:e.$v.item.exception_name.$model,callback:function(t){e.$set(e.$v.item.exception_name,"$model",t)},expression:"$v.item.exception_name.$model"}})],1),i("q-field",{attrs:{label:e.$t("field.description.label"),helper:e.$t("field.description.helper"),error:e.$v.item.description.$error,"error-label":e.validationError(e.$v.item.description)}},[i("q-input",{attrs:{placeholder:e.$t("field.description.placeholder")},model:{value:e.$v.item.description.$model,callback:function(t){e.$set(e.$v.item.description,"$model",t)},expression:"$v.item.description.$model"}})],1),i("q-field",{attrs:{label:e.$t("field.employee_id.label"),helper:e.$t("field.employee_id.helper"),error:e.$v.item.employee_id.$error,"error-label":e.validationError(e.$v.item.employee_id)}},[i("q-select",{attrs:{filter:"",options:e.options.employee_id,placeholder:e.$t("field.employee_id.placeholder")},model:{value:e.$v.item.employee_id.$model,callback:function(t){e.$set(e.$v.item.employee_id,"$model",t)},expression:"$v.item.employee_id.$model"}})],1),i("div",{staticClass:"q-headline"},[e._v("Jornadas")]),i("div",{staticClass:"q-py-md"},[e._l(e.$v.item.slots.$each.$iter,function(t,o){return i("div",{key:o},[i("schedule-select",{attrs:{"timetable-types":e.timetableTypes,"schedule-presets":e.schedulePresets},on:{input:function(e){t.schedule_id.$model=e&&e.schedule_id?e.schedule_id:null}},model:{value:t.schedule.$model,callback:function(i){e.$set(t.schedule,"$model",i)},expression:"slot.schedule.$model"}},[i("div",{staticClass:"col",attrs:{slot:"header"},slot:"header"},[i("q-datetime",{attrs:{type:"date",placeholder:e.$t("field.slot_date.placeholder")},model:{value:t.date.$model,callback:function(i){e.$set(t.date,"$model",i)},expression:"slot.date.$model"}})],1)]),i("hr")],1)}),i("div",{staticClass:"row justify-around items-center q-mt-lg"},[i("q-btn",{attrs:{color:"negative",icon:"remove"},on:{click:function(t){e.$v.item.slots.$model.pop()}}},[i("q-tooltip",[e._v("Remover Jornada")])],1),i("q-btn",{attrs:{color:"positive",icon:"add"},on:{click:function(t){e.$v.item.slots.$model.push({date:null,schedule:null,schedule_id:null})}}},[i("q-tooltip",[e._v("Aggregar Jornada")])],1)],1)],2)],1)],1)],1)],1)},l=[];o._withStripped=!0;i("VRzm"),i("rGqo"),i("yt8O");var a=i("2LSj"),n=i("KcV/"),s=i("RwI2"),r=i("NNmX"),d=i("2izI"),c=i("ta7f"),u=n["a"].ATT_TIMEOFF,p=n["a"].ATT_WORK,m=n["a"].ATT_BREAK,f=n["a"].ATT_EXTRA;function h(){return{exception_name:"",description:"",employee_id:null,slots:[]}}var b={name:"HRAttException",mixins:[s["a"],r["a"]],components:{ScheduleSelect:d["a"]},data:function(){return{resource:"HRAttException",apiRoute:a["j"],editMode:!1,item:h(),schedulePresets:[],timetableTypes:[],mapItemOptions:{},options:{employee_id:[]},table:{loading:!1,rowKey:"exception_id",title:"",filter:"",data:[],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:10},columns:[{name:"exception_name",required:!0,label:this.$t("field.exception_name.label"),align:"left",field:"exception_name",sortable:!0},{name:"description",required:!0,label:this.$t("field.description.label"),align:"left",field:"description",sortable:!0},{name:"slots",required:!0,label:this.$t("field.exception_slots.label"),align:"left",field:function(e){return e.slots.length},sortable:!0},{name:"edit",label:"",required:!0}]}}},validations:{item:{exception_name:{},description:{},employee_id:{required:c["required"]},slots:{$each:{schedule:{required:c["required"]},schedule_id:{requiredIf:Object(c["requiredIf"])(function(e){return e.schedule&&e.schedule.schedule_id})},date:{required:c["required"]}}}}},methods:{newItem:function(){return h()},fetchItems:function(){var e=this;this.table.loading=!0,Promise.all([this.$axios.get(a["j"],{params:{eager:"[employee, slots.schedule.timetable]"}}),this.$axios.get(a["o"],{params:{eager:""}}),this.$axios.get(a["l"],{params:{eager:"timetable",standard:!0}}),this.$axios.get(a["n"],{params:{eager:"",type_id:[u,p,m,f]}})]).then(function(t){e.table.data=t[0]&&t[0].data?t[0].data:[],e.options.employee_id=t[1]&&t[1].data?t[1].data.map(function(e){return{value:e.employee_id,label:e.name_first+" "+e.name_paternal,stamp:String(e.zktime_pin)}}):[],e.schedulePresets=t[2]?t[2].data:[],e.timetableTypes=t[3]?t[3].data:[],e.table.loading=!1}).catch(function(){e.table.loading=!1})},deleteParams:function(e){return{exception_id:e.exception_id}}},mounted:function(){this.fetchItems()}},$=b,_=(i("K43U"),i("KHd+")),v=i("TjEE"),q=Object(_["a"])($,o,l,!1,null,null,null);"function"===typeof v["default"]&&Object(v["default"])(q);t["default"]=q.exports},TjEE:function(e,t,i){"use strict";var o=i("4/3K"),l=i.n(o);t["default"]=l.a}}]);