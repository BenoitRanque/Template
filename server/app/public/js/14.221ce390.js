(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"83bq":function(e,t,n){},Jwxc:function(e,t){e.exports={ATT_WORK:11,ATT_EXTRA:12,ATT_BREAK:13,ATT_TIMEOFF:21,ATT_VACATION:22,ATT_HOLIDAY:23,ATT_LEAVE_SICK:24,ATT_LEAVE_PAID:25,ATT_LEAVE_UNPAID:26}},"KcV/":function(e,t,n){"use strict";t["a"]=n("Jwxc")},UPiy:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-4"},[n("q-datetime",{model:{value:e.reportParams.from,callback:function(t){e.$set(e.reportParams,"from",t)},expression:"reportParams.from"}})],1),n("div",{staticClass:"col-4"},[n("q-datetime",{model:{value:e.reportParams.to,callback:function(t){e.$set(e.reportParams,"to",t)},expression:"reportParams.to"}})],1),n("div",{staticClass:"col-4"},[n("q-select",{attrs:{multiple:"",options:e.options.employee_id},model:{value:e.reportParams.employee_id,callback:function(t){e.$set(e.reportParams,"employee_id",t)},expression:"reportParams.employee_id"}})],1)]),n("div",{staticClass:"q-pa-sm row justify-center"},[n("q-btn",{attrs:{icon:"refresh"},on:{click:e.refresh}},[e._v("refresh")])],1),n("div",{staticClass:"q-pa-sm row justify-center"},[n("q-btn",{attrs:{icon:"refresh"},on:{click:e.fetch}},[e._v("report")])],1),n("hr"),n("q-table",{attrs:{data:e.data,columns:e.columns},scopedSlots:e._u([e._l(e.dates,function(e,t){return{key:"body-cell-"+e,fn:function(r){return n("att-report-cell",{key:t,attrs:{attendance:r.row.attendance.find(function(t){return t.date===e})}})}}})])})],1)},a=[];r._withStripped=!0;n("VRzm"),n("rGqo"),n("yt8O"),n("dRSK");var i=n("RIqP"),o=n.n(i),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-td",[n("div",{staticClass:"row full-height full-width"},[n("div",{staticClass:"col-8 column justify-between"},e._l(e.attendance.events,function(t,r){return n("div",{key:r,staticClass:"col q-pa-sm"},[e._v("\n        "+e._s(e.$date.formatDate(t,"HH:mm"))+"\n      ")])})),n("div",{staticClass:"col-4"},[n("q-btn",{attrs:{icon:"info",size:"sm",color:"info",flat:"",round:"",dense:""}},[n("q-popover",[n("pre",[e._v("            "+e._s(e.attendance)+"\n          ")])])],1),e.attendance.balance.event.extra>0?[n("br"),n("q-btn",{attrs:{icon:"warning",size:"sm",color:"warning",flat:"",round:"",dense:""}},[n("q-tooltip",[e._v("\n            "+e._s(e.attendance.balance.event.extra)+" marcaciones por demas\n          ")])],1)]:e._e(),e.attendance.balance.event.missing>0?[n("br"),n("q-btn",{attrs:{icon:"warning",size:"sm",color:"negative",flat:"",round:"",dense:""}},[n("q-tooltip",[e._v("\n            Faltan "+e._s(e.attendance.balance.event.missing)+" marcaciones\n          ")])],1)]:e._e()],2)])])},c=[];s._withStripped=!0;n("Vd3H");var l={name:"AttReportCell",props:{attendance:{type:Object,required:!0}},data:function(){return{popover:!1}},computed:{events:function(){var e=this,t=[];return this.attendance?this.attendance.timetable.reduce(function(e,t){return e.push({time:t.start_event,reference:t.start_time,type_id:t.type_id}),e.push({time:t.end_event,reference:t.end_time,type_id:t.type_id}),e},[]).sort(function(t,n){return e.$date.getDateDiff(new Date(t.time),new Date(n.time),"minutes")}):t}}},u=l,d=(n("szei"),n("KHd+")),p=Object(d["a"])(u,s,c,!1,null,"311833db",null),m=p.exports,f=n("2LSj"),_=n("KcV/"),v=n("ta7f"),h=_["a"].ATT_BREAK,T=_["a"].ATT_WORK,b=_["a"].ATT_TIMEOFF,A={name:"HRReport",components:{AttReportCell:m},data:function(){return{attType:{ATT_BREAK:h,ATT_WORK:T,ATT_TIMEOFF:b},report:null,reportParams:{from:null,to:null,employee_id:[]},options:{employee_id:[]}}},validations:{reportParams:{from:{required:v["required"]},to:{required:v["required"]},employee_id:{required:v["required"]}}},computed:{dates:function(){return this.report&&this.report[0]&&this.report[0].attendance?this.report[0].attendance.map(function(e){return e.date}):[]},data:function(){return this.report?this.report:[]},columns:function(){var e=this;return[{name:"employee",field:function(e){return e.employee.name_first+" "+e.employee.name_paternal},label:"Nombre del Empleado",sort:!0}].concat(o()(this.dates.map(function(t){return{name:t,label:e.$date.formatDate(t,"DD/MM/YYYY"),field:function(e){return e.attendance.find(function(e){return e.date===t})}}})))}},methods:{filterTimetables:function(e){return e.filter(function(e){return e.type_id!==h})},refresh:function(){var e=this;Promise.all([this.$axios.get(f["o"])]).then(function(t){e.options.employee_id=t[0]&&t[0].data?t[0].data.map(function(e){return{value:e.employee_id,label:e.name_first+" "+e.name_paternal,stamp:e.zktime_id}}):[]}).catch(function(){})},fetch:function(){var e=this;this.report=null,this.$axios.get(f["k"],{params:this.reportParams}).then(function(t){e.report=t.data})}}},q=A,y=(n("lN6K"),Object(d["a"])(q,r,a,!1,null,"395bf01b",null));t["default"]=y.exports},acPU:function(e,t,n){},lN6K:function(e,t,n){"use strict";var r=n("acPU"),a=n.n(r);a.a},szei:function(e,t,n){"use strict";var r=n("83bq"),a=n.n(r);a.a}}]);