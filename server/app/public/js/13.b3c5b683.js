(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"3fI2":function(e,t,i){},"99Ce":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("q-table",{staticClass:"no-shadow",attrs:{title:e.table.title,"row-key":e.table.rowKey,loading:e.table.loading,data:e.table.data,columns:e.table.columns,filter:e.table.filter,pagination:e.table.pagination},on:{"update:pagination":function(t){e.$set(e.table,"pagination",t)}},scopedSlots:e._u([{key:"top-left",fn:function(t){return[i("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",flat:"",color:"primary",icon:"refresh",size:"md"},on:{click:function(t){e.fetchItems()}}}),i("q-search",{staticClass:"col-6",attrs:{"hide-underline":"",color:"secondary"},model:{value:e.table.filter,callback:function(t){e.$set(e.table,"filter",t)},expression:"table.filter"}})]}},{key:"top-right",fn:function(t){return[e.isAuthorized(e.resource,"create","any")?i("q-btn",{attrs:{round:"",color:"positive",icon:"add",size:"md"},on:{click:function(t){e.edit()}}}):e._e()]}},{key:"body-cell-type",fn:function(t){return i("q-td",{attrs:{props:t,"auto-width":""}},[i("q-chip",{style:{background:t.row.type.color}},[e._v(e._s(t.row.type.code))])],1)}},{key:"body-cell-edit",fn:function(t){return i("q-td",{attrs:{props:t,"auto-width":""}},[e.isAuthorized(e.resource,["update","delete"],"any")?i("q-btn",{attrs:{size:"md",round:"",dense:"",flat:"",icon:"edit",color:"dark"},on:{click:function(i){e.edit(t.row)}}}):e._e()],1)}}])}),i("q-modal",{ref:"modal",attrs:{"no-esc-dismiss":"","no-backdrop-dismiss":"","content-css":"width: 80vw; height: 80vh;"}},[i("q-modal-layout",[i("q-toolbar",{staticClass:"q-py-none q-pr-none",attrs:{slot:"header"},slot:"header"},[i("q-toolbar-title",[e._v("\n          "+e._s(e.editMode?e.$t("edit"):e.$t("create"))+" "+e._s(e.$t("modal.title"))+"\n          "),i("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[e._v(e._s(e.$t("modal.subtitle")))])]),i("q-btn",{staticClass:"no-shadow",staticStyle:{"border-radius":"0"},attrs:{icon:"close",color:"negative",size:"lg"},on:{click:function(t){e.cancel()}}})],1),i("q-toolbar",{staticClass:"justify-around q-py-sm",attrs:{slot:"footer",align:"around"},slot:"footer"},[e.editMode?[e.isAuthorized(e.resource,"delete","any")?i("q-btn",{attrs:{size:"lg",rounded:"",color:"negative",icon:"delete"},on:{click:function(t){e.deleteItem(e.item)}}},[e._v(e._s(e.$t("buttons.deleteItem")))]):e._e(),e.isAuthorized(e.resource,"update","any")?i("q-btn",{attrs:{size:"lg",rounded:"",color:"positive",icon:"save",disable:e.$v.item.$invalid},on:{click:function(t){e.updateItem(e.item)}}},[e._v(e._s(e.$t("buttons.updateItem")))]):e._e()]:[e.isAuthorized(e.resource,"create","any")?i("q-btn",{attrs:{size:"lg",rounded:"",color:"positive",icon:"create",disable:e.$v.item.$invalid},on:{click:function(t){e.createItem(e.item)}}},[e._v(e._s(e.$t("buttons.createItem")))]):e._e()]],2),i("div",{staticClass:"layout-padding group"},[i("schedule-select",{attrs:{standard:"","timetable-types":e.timetableTypes},model:{value:e.$v.item.$model,callback:function(t){e.$set(e.$v.item,"$model",t)},expression:"$v.item.$model"}})],1)],1)],1)],1)},n=[];s._withStripped=!0;i("RW0V");var a=i("MVZn"),d=i.n(a),o=(i("VRzm"),i("rGqo"),i("yt8O"),i("Z2Ku"),i("L9s1"),i("2LSj")),r=i("2izI"),l=i("KcV/"),u=i("RwI2"),c=i("NNmX"),m=i("ta7f"),_=l["a"].ATT_TIMEOFF,b=l["a"].ATT_WORK,h=l["a"].ATT_BREAK,f=l["a"].ATT_EXTRA;function p(){return{schedule_name:"",description:"",standard:!0,timetable:[]}}var $={name:"HRAttSchedule",mixins:[u["a"],c["a"]],components:{ScheduleSelect:r["a"]},data:function(){return{resource:"HRAttSchedule",apiRoute:o["l"],editMode:!1,item:p(),advancedTimetable:!1,timetablePresets:[{type_id:_,timetable_name:"Dia Libre",start_time:null,start_require_event:!1,end_time:null,end_require_event:!1,duration:this.$date.buildDate({hours:8,minutes:0,seconds:0,milliseconds:0})},{type_id:_,timetable_name:"Medio Dia Libre",start_time:null,start_require_event:!1,end_time:null,end_require_event:!1,duration:this.$date.buildDate({hours:4,minutes:0,seconds:0,milliseconds:0})},{type_id:h,timetable_name:"Almuerzo",start_time:this.$date.buildDate({hours:11,minutes:0,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:14,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:0,minutes:30,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Dia Laboral Continuo",start_time:this.$date.buildDate({hours:8,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:16,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:8,minutes:0,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Dia Laboral Continuo",start_time:this.$date.buildDate({hours:9,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:17,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:8,minutes:0,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Dia Laboral Continuo",start_time:this.$date.buildDate({hours:10,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:18,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:8,minutes:0,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Medio Dia Laboral",start_time:this.$date.buildDate({hours:8,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:12,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:4,minutes:0,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Medio Dia Laboral",start_time:this.$date.buildDate({hours:9,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:13,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:4,minutes:0,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Medio Dia Laboral",start_time:this.$date.buildDate({hours:10,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:14,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:4,minutes:0,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Medio Dia Laboral",start_time:this.$date.buildDate({hours:12,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:16,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:4,minutes:0,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Medio Dia Laboral",start_time:this.$date.buildDate({hours:13,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:17,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:4,minutes:0,seconds:0,milliseconds:0})},{type_id:b,timetable_name:"Medio Dia Laboral",start_time:this.$date.buildDate({hours:14,minutes:30,seconds:0,milliseconds:0}),start_require_event:!0,end_time:this.$date.buildDate({hours:18,minutes:30,seconds:0,milliseconds:0}),end_require_event:!0,duration:this.$date.buildDate({hours:4,minutes:0,seconds:0,milliseconds:0})}],timetableTypes:null,options:{boolean:[{value:!0,label:this.$t("options.boolean.true")},{value:!1,label:this.$t("options.boolean.false")}],type_id:[]},table:{loading:!1,rowKey:"schedule_id",title:"",filter:"",data:[],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:10},columns:[{name:"schedule_name",required:!0,label:this.$t("field.schedule_name.label"),align:"left",field:"schedule_name",sortable:!0},{name:"description",required:!0,label:this.$t("field.description.label"),align:"left",field:"description",sortable:!0},{name:"standard",required:!0,label:this.$t("field.standard.label"),align:"left",field:"standard",sortable:!0},{name:"edit",label:"",required:!0}]}}},validations:{item:{schedule_name:{required:m["required"]},description:{},standard:{},timetable:{required:m["required"],dailyHours:function(e){return 8===e.reduce(function(e,t){return[b,_].includes(t.type_id)?e+(new Date(t.duration).getHours()+new Date(t.duration).getMinutes()/60):e},0)},$each:{type_id:{required:m["required"]},timetable_name:{},start_time:{requiredIf:Object(m["requiredIf"])(function(e){return[b,h].includes(e.type_id)})},start_require_event:{},end_time:{requiredIf:Object(m["requiredIf"])(function(e){return[b,h].includes(e.type_id)})},end_require_event:{},duration:{requiredIf:Object(m["requiredIf"])(function(e){return[b,h,_].includes(e.type_id)})}}}}},methods:{newItem:function(){return p()},fetchItems:function(){var e=this;this.table.loading=!0,Promise.all([this.$axios.get(o["l"],{params:{eager:"[timetable]"}}),this.$axios.get(o["n"],{params:{eager:"",type_id:[_,b,h,f]}})]).then(function(t){e.table.data=t[0]&&t[0].data?t[0].data:[],e.options.type_id=t[1]&&t[1].data?t[1].data.map(function(e){return{value:e.type_id,label:e.type_name,sublabel:e.description}}):[],e.timetableTypes=t[1]&&t[1].data?t[1].data:[],e.table.loading=!1}).catch(function(){e.table.loading=!1})},deleteParams:function(e){return{schedule_id:e.schedule_id}},clonePreset:function(e){var t=this,i=d()({},e);return Object.keys(i).forEach(function(e){i[e]instanceof Date&&(i[e]=t.$date.clone(i[e]))}),i},timetableSummary:function(e){switch(e.type_id){case _:return"Duración ".concat(this.$date.formatDate(e.duration,"HH:mm"));case h:return"".concat(this.$date.formatDate(e.duration,"HH:mm")," entre ").concat(this.$date.formatDate(e.start_time,"HH:mm"),"-").concat(this.$date.formatDate(e.end_time,"HH:mm"));case b:return"".concat(this.$date.formatDate(e.start_time,"HH:mm"),"-").concat(this.$date.formatDate(e.end_time,"HH:mm")," duración ").concat(this.$date.formatDate(e.duration,"HH:mm"))}}},mounted:function(){this.fetchItems()}},q=$,v=(i("ywt6"),i("KHd+")),y=i("FZHL"),D=Object(v["a"])(q,s,n,!1,null,null,null);"function"===typeof y["default"]&&Object(y["default"])(D);t["default"]=D.exports},AdfW:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"es":{"modal":{"title":"Horario","subtitle":" "}}}'),delete e.options._Ctor}},FZHL:function(e,t,i){"use strict";var s=i("AdfW"),n=i.n(s);t["default"]=n.a},ywt6:function(e,t,i){"use strict";var s=i("3fI2"),n=i.n(s);n.a}}]);