(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{CqFn:function(t,e,a){"use strict";var r=a("Til4"),n=a.n(r);n.a},Til4:function(t,e,a){},UPiy:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("q-table",{attrs:{filter:t.filter,data:t.data,columns:t.columns,loading:t.loading},scopedSlots:t._u([{key:"top-left",fn:function(e){return[a("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",flat:"",color:"primary",icon:"refresh",size:"md"},on:{click:function(e){t.fetch()}}}),a("q-search",{staticClass:"col-6",attrs:{"hide-underline":"",color:"secondary"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]}},{key:"top-right",fn:function(e){return[a("q-datetime",{attrs:{"float-label":"desde"},model:{value:t.reportParams.from,callback:function(e){t.$set(t.reportParams,"from",e)},expression:"reportParams.from"}}),a("q-datetime",{attrs:{"float-label":"hasta"},model:{value:t.reportParams.to,callback:function(e){t.$set(t.reportParams,"to",e)},expression:"reportParams.to"}}),a("q-select",{attrs:{"float-label":"empleados",filter:"",multiple:"",options:t.subordinateEmployeeOptions},model:{value:t.reportParams.employee_id,callback:function(e){t.$set(t.reportParams,"employee_id",e)},expression:"reportParams.employee_id"}})]}},t._l(t.dates,function(t,e){return{key:"body-cell-"+t,fn:function(r){return a("att-report-cell",{key:e,attrs:{value:r.row.attendance.find(function(e){return e.date===t})}})}}})])})],1)},n=[];r._withStripped=!0;a("dRSK");var s=a("RIqP"),i=a.n(s),l=a("MVZn"),o=a.n(l),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-td",{staticClass:"q-caption",staticStyle:{padding:"0 2px"}},[a("div",{staticClass:"full-height full-width row"},[t.hasEvents?a("div",{staticClass:"full-height column",class:t.leftClass},t._l(t.value.summary.events,function(e,r){return a("div",{key:r,staticClass:"col row items-center justify-center text-white text-center",class:{"bg-positive":!e.missing&&!e.late,"bg-negative":e.late,"bg-tertiary":e.missing,"bg-warning":e.early}},[a("div",{staticClass:"col q-pa-xs"},[t._v("\n          "+t._s(t.$date.formatDate(e.time,"HH:mm"))+"\n          "),a("q-tooltip",[t._v("\n            "+t._s(e.label)+"\n          ")])],1)])})):t._e(),t.hasAbsence||t.hasDowntime?a("div",{staticClass:"full-height column",class:t.rightClass},[t._l(t.value.summary.downtime,function(e,r){return a("div",{key:r,staticClass:"col row items-center justify-center text-white text-center",style:{background:e.color}},[a("div",{staticClass:"col q-pa-xs"},[t._v("\n          "+t._s(e.code)+"\n          "),a("q-tooltip",[t._v("\n            "+t._s(e.label)+"\n          ")])],1)])}),t.hasAbsence?a("div",{staticClass:"col row items-center justify-center text-white text-center bg-negative"},[a("div",{staticClass:"col q-pa-xs"},[t._v("\n          "+t._s(t.value.summary.absent.code)+"\n          "),a("q-tooltip",[t._v("\n            "+t._s(t.value.summary.absent.label)+"\n          ")])],1)]):t._e()],2):t._e()]),a("q-popover",{staticClass:"q-pa-md",attrs:{anchor:"bottom middle",self:"top middle"}},[a("div",{staticClass:"q-title"},[t._v("Fecha: "+t._s(t.$date.formatDate(t.value.date,"DD/MM/YYYY")))]),a("pre",[t._v(t._s(t.value))])])],1)},u=[];c._withStripped=!0;var m={name:"AttReportCell",props:{value:{type:Object,required:!0}},computed:{hasAbsence:function(){return this.value.summary&&this.value.summary.absent},hasDowntime:function(){return this.value.summary&&this.value.summary.downtime&&this.value.summary.downtime.length},hasEvents:function(){return this.value.summary&&this.value.summary.events&&this.value.summary.events.length},leftClass:function(){return this.hasAbsence||this.hasDowntime?"col-8":"col-12"},rightClass:function(){return this.hasEvents?"col-4":"col-12"}}},d=m,p=(a("CqFn"),a("KHd+")),f=Object(p["a"])(d,c,u,!1,null,"34df613f",null),h=f.exports,v=a("2LSj"),y=a("L2JU"),b=a("ta7f"),_={name:"HRReport",components:{AttReportCell:h},data:function(){return{filter:"",loading:!1,report:null,reportParams:{from:null,to:null,employee_id:[]}}},validations:{reportParams:{from:{required:b["required"]},to:{required:b["required"]},employee_id:{required:b["required"]}}},computed:o()({},Object(y["c"])("hr",{subordinateEmployeeOptions:"subordinateEmployeeOptions"}),{dates:function(){return this.report&&this.report[0]&&this.report[0].attendance?this.report[0].attendance.map(function(t){return t.date}):[]},data:function(){return this.report?this.report:[]},columns:function(){var t=this;return[{name:"employee",field:function(t){return t.employee.name_first+" "+t.employee.name_paternal},label:"Nombre del Empleado",sort:!0}].concat(i()(this.dates.map(function(e){return{name:e,label:t.$date.formatDate(e,"DDD DD/MM/YYYY"),field:function(t){return t.attendance.find(function(t){return t.date===e})}}})))}}),methods:{fetch:function(){var t=this;this.report=null,this.loading=!0,this.$axios.get(v["k"],{params:this.reportParams}).then(function(e){t.loading=!1,t.report=e.data}).catch(function(){t.loading=!1})}}},q=_,g=(a("vBEV"),Object(p["a"])(q,r,n,!1,null,"7b334d2d",null));e["default"]=g.exports},eHRA:function(t,e,a){},vBEV:function(t,e,a){"use strict";var r=a("eHRA"),n=a.n(r);n.a}}]);